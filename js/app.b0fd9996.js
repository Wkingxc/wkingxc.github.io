(function(){"use strict";var t={4130:function(t,e,s){var r=s(5130),n=s(6768);function i(t,e,s,r,i,o){const a=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.Wv)(a)}var o={name:"App"},a=s(1241);const l=(0,a.A)(o,[["render",i]]);var d=l,c=(s(8111),s(3579),s(1387)),p=s(4232);const h={class:"login-view"},u={class:"login-container"},g={key:0,class:"error-message"};function C(t,e,s,i,o,a){return(0,n.uX)(),(0,n.CE)("div",h,[e[3]||(e[3]=(0,n.Lk)("h1",null,"抽卡游戏",-1)),(0,n.Lk)("div",u,[(0,n.bo)((0,n.Lk)("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=t=>o.password=t),placeholder:"请输入密码",class:"password-input",onKeyup:e[1]||(e[1]=(0,r.jR)(((...t)=>a.checkPassword&&a.checkPassword(...t)),["enter"]))},null,544),[[r.Jo,o.password]]),o.errorMessage?((0,n.uX)(),(0,n.CE)("p",g,(0,p.v_)(o.errorMessage),1)):(0,n.Q3)("",!0),(0,n.Lk)("button",{class:"login-button",onClick:e[2]||(e[2]=(...t)=>a.checkPassword&&a.checkPassword(...t))},"进入游戏")])])}s(4114);var f={name:"LoginView",data(){return{password:"",errorMessage:""}},methods:{checkPassword(){"w123456"===this.password?(localStorage.setItem("isAuthenticated","true"),this.$router.push("/home")):(this.errorMessage="密码错误，请重试",this.password="")}}};const w=(0,a.A)(f,[["render",C],["__scopeId","data-v-42fbc59c"]]);var k=w;const v={class:"app-container"};function j(t,e,s,r,i,o){const a=(0,n.g2)("MainView"),l=(0,n.g2)("CardView");return(0,n.uX)(),(0,n.CE)("div",v,[i.isCardView?((0,n.uX)(),(0,n.Wv)(l,{key:1,cardBackSrc:i.cardBackSrc,excludedCards:i.excludedCards,onReturnToMain:o.returnToMain},null,8,["cardBackSrc","excludedCards","onReturnToMain"])):((0,n.uX)(),(0,n.Wv)(a,{key:0,rulesCardSrc:i.rulesCardSrc,onStartGame:o.startCardView,ref:"mainView"},null,8,["rulesCardSrc","onStartGame"]))])}const m={class:"main-view"},y={class:"rules-card"},b=["src"],F={class:"code-input-container"};function L(t,e,s,i,o,a){return(0,n.uX)(),(0,n.CE)("div",m,[e[3]||(e[3]=(0,n.Lk)("h1",null,"抽卡游戏",-1)),(0,n.Lk)("div",y,[(0,n.Lk)("img",{src:s.rulesCardSrc,alt:"规则卡",class:"rule-card-image"},null,8,b)]),(0,n.Lk)("div",F,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.identityCode=t),placeholder:"输入识别码（可选）",class:"identity-code-input",maxlength:"5"},null,512),[[r.Jo,o.identityCode]]),e[2]||(e[2]=(0,n.Lk)("p",{class:"code-tip"},"输入对方的识别码可避免抽到相同卡牌",-1))]),(0,n.Lk)("button",{class:"draw-button",onClick:e[1]||(e[1]=(...t)=>a.startGame&&a.startGame(...t))},"开始抽卡")])}var E={name:"MainView",props:{rulesCardSrc:{type:String,required:!0}},data(){return{identityCode:"",errorMessage:""}},methods:{startGame(){let t=[];if(this.identityCode)try{t=this.parseIdentityCode(this.identityCode)}catch(e){alert("识别码无效，将从全部卡牌中抽取"),t=[]}this.$emit("start-game",t)},parseIdentityCode(t){if(5!==t.length)throw new Error("识别码长度错误");const e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",s=[];for(let r=0;r<t.length;r++){const n=t[r],i=e.indexOf(n);if(-1===i)throw new Error("识别码包含无效字符");const o=i+1;s.push(o)}return s}}};const S=(0,a.A)(E,[["render",L],["__scopeId","data-v-a74ee0d4"]]);var M=S;const x={class:"cards-container"},T=["onClick"],A={class:"card-inner"},R={class:"card-front"},V=["src"],I={class:"card-back"},O=["src"],X={class:"buttons"},W=["disabled"],B={key:0,class:"code-container"},U={class:"identity-code"},q={key:0,class:"qrcode-container"},D=["src"];function K(t,e,s,r,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:(0,p.C4)(["card-view",{"mobile-view":i.isMobile}])},[e[6]||(e[6]=(0,n.Lk)("h2",null,"抽卡结果",-1)),(0,n.Lk)("div",x,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.cards,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:(0,p.C4)(["card",{flipped:i.showCardFront?t.isFlipped:!t.isFlipped,"special-card":o.isSpecialCard(t.id)&&(i.showCardFront?!t.isFlipped:t.isFlipped)}]),onClick:t=>o.flipCard(e)},[(0,n.Lk)("div",A,[(0,n.Lk)("div",R,[(0,n.Lk)("img",{src:o.getCardFrontSrc(t.id),alt:"卡牌正面"},null,8,V)]),(0,n.Lk)("div",I,[(0,n.Lk)("img",{src:s.cardBackSrc,alt:"卡牌背面"},null,8,O)])])],10,T)))),128))]),(0,n.Lk)("div",X,[(0,n.Lk)("button",{class:"action-button",onClick:e[0]||(e[0]=(...t)=>o.handleFlipAllCards&&o.handleFlipAllCards(...t)),disabled:i.allCardsFlipped},"抽取卡牌",8,W),(0,n.Lk)("button",{class:"return-button",onClick:e[1]||(e[1]=(...t)=>o.returnToMain&&o.returnToMain(...t))},"返回主界面"),(0,n.Lk)("button",{class:"toggle-button",onClick:e[2]||(e[2]=(...t)=>o.toggleCardsFace&&o.toggleCardsFace(...t))},(0,p.v_)(i.showCardFront?"隐藏":"显示"),1)]),i.identityCode?((0,n.uX)(),(0,n.CE)("div",B,[(0,n.Lk)("p",null,[e[3]||(e[3]=(0,n.eW)("识别码: ")),(0,n.Lk)("span",U,(0,p.v_)(i.identityCode),1)]),e[5]||(e[5]=(0,n.Lk)("p",{class:"code-tip"},"将此识别码发给对方，对方输入后可避免抽到相同卡牌",-1)),i.qrcodeUrl?((0,n.uX)(),(0,n.CE)("div",q,[e[4]||(e[4]=(0,n.Lk)("p",{class:"qrcode-title"},"或扫描下方二维码",-1)),(0,n.Lk)("img",{src:i.qrcodeUrl,alt:"二维码",class:"qrcode-image"},null,8,D)])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)],2)}s(2489),s(7588),s(1701);var P=s(8420),z={name:"CardView",props:{cardBackSrc:{type:String,required:!0},excludedCards:{type:Array,default:()=>[]}},data(){return{cards:[],allCardsFlipped:!1,showCardFront:!1,inDrawMode:!1,identityCode:"",qrcodeUrl:"",specialCardIds:[21,22,46,47,48,50],isMobile:!1}},created(){this.drawCards(),this.checkDeviceType(),window.addEventListener("resize",this.checkDeviceType)},beforeUnmount(){window.removeEventListener("resize",this.checkDeviceType)},methods:{checkDeviceType(){this.isMobile=window.innerWidth<=768},isSpecialCard(t){return this.specialCardIds.includes(t)},drawCards(){this.cards=[],this.allCardsFlipped=!1,this.showCardFront=!1,this.inDrawMode=!1;let t=Array.from({length:54},((t,e)=>e+1)).filter((t=>!this.excludedCards.includes(t)));for(let s=t.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1));[t[s],t[e]]=[t[e],t[s]]}const e=t.slice(0,5);for(let s=0;s<e.length;s++)this.cards.push({id:e[s],isFlipped:!1});this.generateIdentityCode()},generateIdentityCode(){const t=this.cards.map((t=>t.id));let e="";for(const s of t){const t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=s-1;e+=t[r]}this.identityCode=e,this.generateQRCode(e)},generateQRCode(t){const e=document.createElement("canvas");P.toCanvas(e,window.location.origin+"/#/scan/"+t,{width:200,margin:2,color:{dark:"#4c6ef5",light:"#ffffff"}},(t=>{t?console.error("生成二维码出错:",t):this.qrcodeUrl=e.toDataURL("image/png")}))},handleFlipAllCards(){this.inDrawMode=!0,this.showCardFront=!1,this.cards.forEach((t=>{t.isFlipped=!1})),this.allCardsFlipped=!0},flipCard(t){this.allCardsFlipped&&(this.cards[t].isFlipped=!this.cards[t].isFlipped)},toggleCardsFace(){this.showCardFront=!this.showCardFront,this.cards.forEach((t=>{t.isFlipped=!1}))},getCardFrontSrc(t){const e=t.toString().padStart(2,"0"),s={"01":"https://s2.loli.net/2025/04/26/IPAMOtKgoElXNhL.jpg","02":"https://s2.loli.net/2025/04/26/815HcyZwu3jhMFI.jpg","03":"https://s2.loli.net/2025/04/26/kNJ6wUvAj3VuoX8.jpg","04":"https://s2.loli.net/2025/04/26/qk6Z3oUadCvMTxW.jpg","05":"https://s2.loli.net/2025/04/26/nUEmLMbCgx5j1OX.jpg","06":"https://s2.loli.net/2025/04/26/CRBmkYMhoK5cbwx.jpg","07":"https://s2.loli.net/2025/04/26/ojc1U8Zy6lLDbnX.jpg","08":"https://s2.loli.net/2025/04/26/VDY54HBjCMW2dgn.jpg","09":"https://s2.loli.net/2025/04/26/pGIKRg91zAwCVjY.jpg",10:"https://s2.loli.net/2025/04/26/c4TWf1gDFEiHLUG.jpg",11:"https://s2.loli.net/2025/04/26/jDVTvJs4hEORPpS.jpg",12:"https://s2.loli.net/2025/04/26/yDwlTkzZEoAn7gX.jpg",13:"https://s2.loli.net/2025/04/26/g8MP1DfJzSvrTp7.jpg",14:"https://s2.loli.net/2025/04/26/ON53jUgciVeLaKG.jpg",15:"https://s2.loli.net/2025/04/26/HV9WsG56KA1STjQ.jpg",16:"https://s2.loli.net/2025/04/26/3qm8ptP9KZvY67r.jpg",17:"https://s2.loli.net/2025/04/26/ndjkY39RApytuTZ.jpg",18:"https://s2.loli.net/2025/04/26/v63MmcnOsuEPC2w.jpg",19:"https://s2.loli.net/2025/04/26/1bF7R94Kpdo8SGU.jpg",20:"https://s2.loli.net/2025/04/26/c3kxrvhH4y6OguU.jpg",21:"https://s2.loli.net/2025/04/26/IuatYBZ4dPJpniF.jpg",22:"https://s2.loli.net/2025/04/26/isBuYwfyWCtJk7E.jpg",23:"https://s2.loli.net/2025/04/26/ZBYKrPqneu8xCdI.jpg",24:"https://s2.loli.net/2025/04/26/uCwklA7hOofRFJW.jpg",25:"https://s2.loli.net/2025/04/26/9Ikw7LQirzlgB5n.jpg",26:"https://s2.loli.net/2025/04/26/PGik7J3IO1xTKht.jpg",27:"https://s2.loli.net/2025/04/26/zPWDrbeKNfi2LF9.jpg",28:"https://s2.loli.net/2025/04/26/iUGblh8rPDz9RIY.jpg",29:"https://s2.loli.net/2025/04/26/M35HaYywEXuTc1J.jpg",30:"https://s2.loli.net/2025/04/26/pL7eGHr3n1WZyEY.jpg",31:"https://s2.loli.net/2025/04/26/ungZivazUY7x5r9.jpg",32:"https://s2.loli.net/2025/04/26/zDfxKIoE2WOqwNC.jpg",33:"https://s2.loli.net/2025/04/26/AS2FZmxoGR4EiWB.jpg",34:"https://s2.loli.net/2025/04/26/nBu3mgWfpycbo7w.jpg",35:"https://s2.loli.net/2025/04/26/xUYnpgrsowFOq4f.jpg",36:"https://s2.loli.net/2025/04/26/wn3ez5uOkRYdrHV.jpg",37:"https://s2.loli.net/2025/04/26/EFW58oPrybJzl1X.jpg",38:"https://s2.loli.net/2025/04/26/L7aoYjOeT4npASi.jpg",39:"https://s2.loli.net/2025/04/26/dtEY1WRlxirQJhf.jpg",40:"https://s2.loli.net/2025/04/26/dR2OkzNrobSKH4W.jpg",41:"https://s2.loli.net/2025/04/26/TMdkoDPEylqKC6J.jpg",42:"https://s2.loli.net/2025/04/26/yHsb7TDiuUBhJ1a.jpg",43:"https://s2.loli.net/2025/04/26/MNjidFkobhWt6Ac.jpg",44:"https://s2.loli.net/2025/04/26/SRnm6QgbZ8d12VY.jpg",45:"https://s2.loli.net/2025/04/26/x3fkXKDjZVNSF6C.jpg",46:"https://s2.loli.net/2025/04/26/sB3IPDazvK1bgXS.jpg",47:"https://s2.loli.net/2025/04/26/RmCzWT7yqQa91jB.jpg",48:"https://s2.loli.net/2025/04/26/WaEBfgCztpK6IbV.jpg",49:"https://s2.loli.net/2025/04/26/3nsiWFkRuo1cq6J.jpg",50:"https://s2.loli.net/2025/04/26/b9FKUsNOygpH2Rz.jpg",51:"https://s2.loli.net/2025/04/26/ZEFWAIUqvbtBK3T.png",52:"https://s2.loli.net/2025/04/26/ClkBshSMw28XRTo.png",53:"https://s2.loli.net/2025/04/26/URBKdtCzYcDXJ3x.png",54:"https://s2.loli.net/2025/04/26/oqR6TAngZXyVucO.png"};return s[e]},returnToMain(){this.$emit("return-to-main")}}};const Y=(0,a.A)(z,[["render",K],["__scopeId","data-v-8fe3ce28"]]);var J=Y,Z={name:"AppHome",components:{MainView:M,CardView:J},props:{code:String},data(){return{isCardView:!1,rulesCardSrc:"https://s2.loli.net/2025/04/26/R5nBQ9hqZKGf6jI.jpg",cardBackSrc:"https://s2.loli.net/2025/04/26/a2wjXmz8En6HNRC.jpg",excludedCards:[]}},created(){this.checkRouteCode()},watch:{$route(){this.checkRouteCode()}},methods:{checkRouteCode(){this.$route.params.code&&(this.isCardView=!1,this.$nextTick((()=>{const t=this.$refs.mainView;t&&this.$route.params.code&&(t.identityCode=this.$route.params.code)})))},startCardView(t=[]){this.excludedCards=t,this.isCardView=!0},returnToMain(){this.isCardView=!1,this.excludedCards=[]}}};const G=(0,a.A)(Z,[["render",j],["__scopeId","data-v-9f23b916"]]);var H=G;const Q=[{path:"/",component:k},{path:"/home",component:H,meta:{requiresAuth:!0}},{path:"/scan/:code",component:H,props:!0}],_=(0,c.aE)({history:(0,c.Bt)(),routes:Q});_.beforeEach(((t,e,s)=>{t.matched.some((t=>t.meta.requiresAuth))?localStorage.getItem("isAuthenticated")||t.params.code?s():s({path:"/"}):"/"===t.path&&localStorage.getItem("isAuthenticated")?s({path:"/home"}):s()}));var N=_;(0,r.Ef)(d).use(N).mount("#app")}},e={};function s(r){var n=e[r];if(void 0!==n)return n.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,r,n,i){if(!r){var o=1/0;for(c=0;c<t.length;c++){r=t[c][0],n=t[c][1],i=t[c][2];for(var a=!0,l=0;l<r.length;l++)(!1&i||o>=i)&&Object.keys(s.O).every((function(t){return s.O[t](r[l])}))?r.splice(l--,1):(a=!1,i<o&&(o=i));if(a){t.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[r,n,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,r){var n,i,o=r[0],a=r[1],l=r[2],d=0;if(o.some((function(e){return 0!==t[e]}))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);if(l)var c=l(s)}for(e&&e(r);d<o.length;d++)i=o[d],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(c)},r=self["webpackChunkadultcards"]=self["webpackChunkadultcards"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=s.O(void 0,[504],(function(){return s(4130)}));r=s.O(r)})();
//# sourceMappingURL=app.b0fd9996.js.map