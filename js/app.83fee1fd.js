(function(){"use strict";var t={290:function(t,e,s){var i=s(5130),n=s(6768);const r={class:"app-container"};function o(t,e,s,i,o,l){const a=(0,n.g2)("MainView"),d=(0,n.g2)("CardView");return(0,n.uX)(),(0,n.CE)("div",r,[o.isCardView?((0,n.uX)(),(0,n.Wv)(d,{key:1,cardBackSrc:o.cardBackSrc,excludedCards:o.excludedCards,onReturnToMain:l.returnToMain},null,8,["cardBackSrc","excludedCards","onReturnToMain"])):((0,n.uX)(),(0,n.Wv)(a,{key:0,rulesCardSrc:o.rulesCardSrc,onStartGame:l.startCardView,ref:"mainView"},null,8,["rulesCardSrc","onStartGame"]))])}const l={class:"main-view"},a={class:"rules-card"},d=["src"],c={class:"code-input-container"};function p(t,e,s,r,o,p){return(0,n.uX)(),(0,n.CE)("div",l,[e[3]||(e[3]=(0,n.Lk)("h1",null,"抽卡游戏",-1)),(0,n.Lk)("div",a,[(0,n.Lk)("img",{src:s.rulesCardSrc,alt:"规则卡",class:"rule-card-image"},null,8,d)]),(0,n.Lk)("div",c,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.identityCode=t),placeholder:"输入识别码（可选）",class:"identity-code-input",maxlength:"5"},null,512),[[i.Jo,o.identityCode]]),e[2]||(e[2]=(0,n.Lk)("p",{class:"code-tip"},"输入对方的识别码可避免抽到相同卡牌",-1))]),(0,n.Lk)("button",{class:"draw-button",onClick:e[1]||(e[1]=(...t)=>p.startGame&&p.startGame(...t))},"开始抽卡")])}s(4114);var h={name:"MainView",props:{rulesCardSrc:{type:String,required:!0}},data(){return{identityCode:"",errorMessage:""}},methods:{startGame(){let t=[];if(this.identityCode)try{t=this.parseIdentityCode(this.identityCode)}catch(e){alert("识别码无效，将从全部卡牌中抽取"),t=[]}this.$emit("start-game",t)},parseIdentityCode(t){if(5!==t.length)throw new Error("识别码长度错误");const e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",s=[];for(let i=0;i<t.length;i++){const n=t[i],r=e.indexOf(n);if(-1===r)throw new Error("识别码包含无效字符");const o=r+1;s.push(o)}return s}}},u=s(1241);const g=(0,u.A)(h,[["render",p],["__scopeId","data-v-a74ee0d4"]]);var C=g,f=s(4232);const j={class:"cards-container"},k=["onClick"],w={class:"card-inner"},v={class:"card-front"},m=["src"],y={class:"card-back"},b=["src"],F={class:"buttons"},L=["disabled"],E={key:0,class:"code-container"},S={class:"identity-code"},M={key:0,class:"qrcode-container"},x=["src"];function T(t,e,s,i,r,o){return(0,n.uX)(),(0,n.CE)("div",{class:(0,f.C4)(["card-view",{"mobile-view":r.isMobile}])},[e[6]||(e[6]=(0,n.Lk)("h2",null,"抽卡结果",-1)),(0,n.Lk)("div",j,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.cards,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:(0,f.C4)(["card",{flipped:r.showCardFront?t.isFlipped:!t.isFlipped,"special-card":o.isSpecialCard(t.id)&&(r.showCardFront?!t.isFlipped:t.isFlipped)}]),onClick:t=>o.flipCard(e)},[(0,n.Lk)("div",w,[(0,n.Lk)("div",v,[(0,n.Lk)("img",{src:o.getCardFrontSrc(t.id),alt:"卡牌正面"},null,8,m)]),(0,n.Lk)("div",y,[(0,n.Lk)("img",{src:s.cardBackSrc,alt:"卡牌背面"},null,8,b)])])],10,k)))),128))]),(0,n.Lk)("div",F,[(0,n.Lk)("button",{class:"action-button",onClick:e[0]||(e[0]=(...t)=>o.handleFlipAllCards&&o.handleFlipAllCards(...t)),disabled:r.allCardsFlipped},"抽取卡牌",8,L),(0,n.Lk)("button",{class:"return-button",onClick:e[1]||(e[1]=(...t)=>o.returnToMain&&o.returnToMain(...t))},"返回主界面"),(0,n.Lk)("button",{class:"toggle-button",onClick:e[2]||(e[2]=(...t)=>o.toggleCardsFace&&o.toggleCardsFace(...t))},(0,f.v_)(r.showCardFront?"隐藏":"显示"),1)]),r.identityCode?((0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("p",null,[e[3]||(e[3]=(0,n.eW)("识别码: ")),(0,n.Lk)("span",S,(0,f.v_)(r.identityCode),1)]),e[5]||(e[5]=(0,n.Lk)("p",{class:"code-tip"},"将此识别码发给对方，对方输入后可避免抽到相同卡牌",-1)),r.qrcodeUrl?((0,n.uX)(),(0,n.CE)("div",M,[e[4]||(e[4]=(0,n.Lk)("p",{class:"qrcode-title"},"或扫描下方二维码",-1)),(0,n.Lk)("img",{src:r.qrcodeUrl,alt:"二维码",class:"qrcode-image"},null,8,x)])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)],2)}s(8111),s(2489),s(7588),s(1701);var R=s(8420),O={name:"CardView",props:{cardBackSrc:{type:String,required:!0},excludedCards:{type:Array,default:()=>[]}},data(){return{cards:[],allCardsFlipped:!1,showCardFront:!1,inDrawMode:!1,identityCode:"",qrcodeUrl:"",specialCardIds:[21,22,46,47,48,50],isMobile:!1}},created(){this.drawCards(),this.checkDeviceType(),window.addEventListener("resize",this.checkDeviceType)},beforeUnmount(){window.removeEventListener("resize",this.checkDeviceType)},methods:{checkDeviceType(){this.isMobile=window.innerWidth<=768},isSpecialCard(t){return this.specialCardIds.includes(t)},drawCards(){this.cards=[],this.allCardsFlipped=!1,this.showCardFront=!1,this.inDrawMode=!1;let t=Array.from({length:54},((t,e)=>e+1)).filter((t=>!this.excludedCards.includes(t)));for(let s=t.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1));[t[s],t[e]]=[t[e],t[s]]}const e=t.slice(0,5);for(let s=0;s<e.length;s++)this.cards.push({id:e[s],isFlipped:!1});this.generateIdentityCode()},generateIdentityCode(){const t=this.cards.map((t=>t.id));let e="";for(const s of t){const t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i=s-1;e+=t[i]}this.identityCode=e,this.generateQRCode(e)},generateQRCode(t){const e=document.createElement("canvas");R.toCanvas(e,window.location.origin+"/#/scan/"+t,{width:200,margin:2,color:{dark:"#4c6ef5",light:"#ffffff"}},(t=>{t?console.error("生成二维码出错:",t):this.qrcodeUrl=e.toDataURL("image/png")}))},handleFlipAllCards(){this.inDrawMode=!0,this.showCardFront=!1,this.cards.forEach((t=>{t.isFlipped=!1})),this.allCardsFlipped=!0},flipCard(t){this.allCardsFlipped&&(this.cards[t].isFlipped=!this.cards[t].isFlipped)},toggleCardsFace(){this.showCardFront=!this.showCardFront,this.cards.forEach((t=>{t.isFlipped=!1}))},getCardFrontSrc(t){const e=t.toString().padStart(2,"0"),s={"01":"https://s2.loli.net/2025/04/26/IPAMOtKgoElXNhL.jpg","02":"https://s2.loli.net/2025/04/26/815HcyZwu3jhMFI.jpg","03":"https://s2.loli.net/2025/04/26/kNJ6wUvAj3VuoX8.jpg","04":"https://s2.loli.net/2025/04/26/qk6Z3oUadCvMTxW.jpg","05":"https://s2.loli.net/2025/04/26/nUEmLMbCgx5j1OX.jpg","06":"https://s2.loli.net/2025/04/26/CRBmkYMhoK5cbwx.jpg","07":"https://s2.loli.net/2025/04/26/ojc1U8Zy6lLDbnX.jpg","08":"https://s2.loli.net/2025/04/26/VDY54HBjCMW2dgn.jpg","09":"https://s2.loli.net/2025/04/26/pGIKRg91zAwCVjY.jpg",10:"https://s2.loli.net/2025/04/26/c4TWf1gDFEiHLUG.jpg",11:"https://s2.loli.net/2025/04/26/jDVTvJs4hEORPpS.jpg",12:"https://s2.loli.net/2025/04/26/yDwlTkzZEoAn7gX.jpg",13:"https://s2.loli.net/2025/04/26/g8MP1DfJzSvrTp7.jpg",14:"https://s2.loli.net/2025/04/26/ON53jUgciVeLaKG.jpg",15:"https://s2.loli.net/2025/04/26/HV9WsG56KA1STjQ.jpg",16:"https://s2.loli.net/2025/04/26/3qm8ptP9KZvY67r.jpg",17:"https://s2.loli.net/2025/04/26/ndjkY39RApytuTZ.jpg",18:"https://s2.loli.net/2025/04/26/v63MmcnOsuEPC2w.jpg",19:"https://s2.loli.net/2025/04/26/1bF7R94Kpdo8SGU.jpg",20:"https://s2.loli.net/2025/04/26/c3kxrvhH4y6OguU.jpg",21:"https://s2.loli.net/2025/04/26/IuatYBZ4dPJpniF.jpg",22:"https://s2.loli.net/2025/04/26/isBuYwfyWCtJk7E.jpg",23:"https://s2.loli.net/2025/04/26/ZBYKrPqneu8xCdI.jpg",24:"https://s2.loli.net/2025/04/26/uCwklA7hOofRFJW.jpg",25:"https://s2.loli.net/2025/04/26/9Ikw7LQirzlgB5n.jpg",26:"https://s2.loli.net/2025/04/26/PGik7J3IO1xTKht.jpg",27:"https://s2.loli.net/2025/04/26/zPWDrbeKNfi2LF9.jpg",28:"https://s2.loli.net/2025/04/26/iUGblh8rPDz9RIY.jpg",29:"https://s2.loli.net/2025/04/26/M35HaYywEXuTc1J.jpg",30:"https://s2.loli.net/2025/04/26/pL7eGHr3n1WZyEY.jpg",31:"https://s2.loli.net/2025/04/26/ungZivazUY7x5r9.jpg",32:"https://s2.loli.net/2025/04/26/zDfxKIoE2WOqwNC.jpg",33:"https://s2.loli.net/2025/04/26/AS2FZmxoGR4EiWB.jpg",34:"https://s2.loli.net/2025/04/26/nBu3mgWfpycbo7w.jpg",35:"https://s2.loli.net/2025/04/26/xUYnpgrsowFOq4f.jpg",36:"https://s2.loli.net/2025/04/26/wn3ez5uOkRYdrHV.jpg",37:"https://s2.loli.net/2025/04/26/EFW58oPrybJzl1X.jpg",38:"https://s2.loli.net/2025/04/26/L7aoYjOeT4npASi.jpg",39:"https://s2.loli.net/2025/04/26/dtEY1WRlxirQJhf.jpg",40:"https://s2.loli.net/2025/04/26/dR2OkzNrobSKH4W.jpg",41:"https://s2.loli.net/2025/04/26/TMdkoDPEylqKC6J.jpg",42:"https://s2.loli.net/2025/04/26/yHsb7TDiuUBhJ1a.jpg",43:"https://s2.loli.net/2025/04/26/MNjidFkobhWt6Ac.jpg",44:"https://s2.loli.net/2025/04/26/SRnm6QgbZ8d12VY.jpg",45:"https://s2.loli.net/2025/04/26/x3fkXKDjZVNSF6C.jpg",46:"https://s2.loli.net/2025/04/26/sB3IPDazvK1bgXS.jpg",47:"https://s2.loli.net/2025/04/26/RmCzWT7yqQa91jB.jpg",48:"https://s2.loli.net/2025/04/26/WaEBfgCztpK6IbV.jpg",49:"https://s2.loli.net/2025/04/26/3nsiWFkRuo1cq6J.jpg",50:"https://s2.loli.net/2025/04/26/b9FKUsNOygpH2Rz.jpg",51:"https://s2.loli.net/2025/04/26/ZEFWAIUqvbtBK3T.png",52:"https://s2.loli.net/2025/04/26/ClkBshSMw28XRTo.png",53:"https://s2.loli.net/2025/04/26/URBKdtCzYcDXJ3x.png",54:"https://s2.loli.net/2025/04/26/oqR6TAngZXyVucO.png"};return s[e]},returnToMain(){this.$emit("return-to-main")}}};const V=(0,u.A)(O,[["render",T],["__scopeId","data-v-8fe3ce28"]]);var B=V,W={name:"App",components:{MainView:C,CardView:B},props:{code:String},data(){return{isCardView:!1,rulesCardSrc:"https://s2.loli.net/2025/04/26/R5nBQ9hqZKGf6jI.jpg",cardBackSrc:"https://s2.loli.net/2025/04/26/a2wjXmz8En6HNRC.jpg",excludedCards:[]}},created(){this.checkRouteCode()},watch:{$route(){this.checkRouteCode()}},methods:{checkRouteCode(){this.$route.params.code&&(this.isCardView=!1,this.$nextTick((()=>{const t=this.$refs.mainView;t&&this.$route.params.code&&(t.identityCode=this.$route.params.code)})))},startCardView(t=[]){this.excludedCards=t,this.isCardView=!0},returnToMain(){this.isCardView=!1,this.excludedCards=[]}}};const D=(0,u.A)(W,[["render",o]]);var I=D,U=s(1387);const X=[{path:"/",component:I},{path:"/scan/:code",component:I,props:!0}],A=(0,U.aE)({history:(0,U.Bt)(),routes:X});var K=A;(0,i.Ef)(I).use(K).mount("#app")}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,i,n,r){if(!i){var o=1/0;for(c=0;c<t.length;c++){i=t[c][0],n=t[c][1],r=t[c][2];for(var l=!0,a=0;a<i.length;a++)(!1&r||o>=r)&&Object.keys(s.O).every((function(t){return s.O[t](i[a])}))?i.splice(a--,1):(l=!1,r<o&&(o=r));if(l){t.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[i,n,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,r,o=i[0],l=i[1],a=i[2],d=0;if(o.some((function(e){return 0!==t[e]}))){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);if(a)var c=a(s)}for(e&&e(i);d<o.length;d++)r=o[d],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(c)},i=self["webpackChunkadultcards"]=self["webpackChunkadultcards"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(290)}));i=s.O(i)})();
//# sourceMappingURL=app.83fee1fd.js.map